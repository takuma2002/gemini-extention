# Gemini DM 返信アシスタント

このChrome拡張機能は、さまざまなダイレクトメッセージ（DM）サイトで、Gemini APIを利用して文脈に応じた返信を自動生成します。

## 主な機能

- **ワンクリックで返信生成:** DMの入力欄の横に表示されるボタンを押すだけで、AIが返信案を作成します。
- **文脈を理解した返信:** 会話の履歴全体を読み取り、流れを汲んだ自然な返信をGemini APIが生成します。
- **幅広いサイトに対応:** 特定のサイトに依存せず、さまざまなDMサイトで動作するように設計されています。（※1）
- **安全なAPIキー管理:** あなたのAPIキーは、ブラウザの安全なストレージにのみ保存され、外部に送信されることはありません。

## 使い方

### ステップ1: 拡張機能のインストール

1.  このリポジトリのファイルをダウンロードし、解凍します。
2.  Chromeブラウザで `chrome://extensions` を開きます。
3.  右上の「デベロッパーモード」をオンにします。
4.  「パッケージ化されていない拡張機能を読み込む」ボタンをクリックし、ダウンロードして解凍したフォルダを選択します。

### ステップ2: APIキーの設定

1.  [Google AI Studio](https://aistudio.google.com/app/apikey) にアクセスし、ご自身のGoogleアカウントでGemini APIキーを取得します。
2.  Chromeの拡張機能管理ページ (`chrome://extensions`) で、本拡張機能の「詳細」をクリックします。
3.  「拡張機能のオプション」を開きます。
4.  開かれた設定ページで、取得したAPIキーを入力し、「保存」ボタンを押します。

### ステップ3: 返信の生成

1.  お好きなDMサイト（例: X (旧Twitter) のDM、InstagramのDMなど）を開きます。
2.  メッセージの入力欄の横に「✨ 生成」ボタンが表示されます。
3.  このボタンをクリックすると、「生成中...」と表示が変わり、少し待つとAIが生成した返信が入力欄に自動で挿入されます。

## 仕組み

この拡張機能は、以下の流れで動作します。

1.  **ボタンの挿入:** `content_script.js`がページの構造を監視し、メッセージ入力欄を見つけると、その隣に「生成」ボタンを追加します。
2.  **会話データの取得:** ボタンがクリックされると、スクリプトはページの中から会話履歴が含まれていると推測される部分のHTMLを丸ごと取得します。
3.  **APIへのリクエスト:** `background.js`がそのHTMLを受け取り、「このHTMLから会話を理解して返信を作成して」という指示と共に、あなたのAPIキーを使ってGemini APIに送信します。
4.  **結果の表示:** Gemini APIから返ってきたテキストを、ページの入力欄に表示します。

## 注意事項

- (※1) 本拡張機能は、一般的なウェブページの構造をヒューリスティック（経験則）に基づいて解析し、会話部分を特定します。そのため、一部の特殊な構造を持つサイトでは、正しく動作しない可能性があります。
- 本機能の利用には、ご自身のGemini APIキーが必要です。APIの利用状況によっては、Googleから利用料金が請求される場合があります。
- この拡張機能は、あくまで返信作成を補助するものです。生成された内容が常に最適であるとは限りませんので、送信前に必ずご自身で内容を確認・編集してください。
